From 9d78b6e1d2cd8cd437c1694da6e6642c99cc498a Mon Sep 17 00:00:00 2001
From: Stefano Karapetsas <stefano@karapetsas.com>
Date: Mon, 08 Apr 2013 14:02:53 +0000
Subject: Fix panels issue when user has two separate X screens

Closes https://github.com/mate-desktop/mate-panel/issues/87
Closes https://github.com/mate-desktop/mate-panel/issues/89
---
diff --git a/mate-panel/panel-layout.c b/mate-panel/panel-layout.c
index d86bcd3..4732420 100644
--- a/mate-panel/panel-layout.c
+++ b/mate-panel/panel-layout.c
@@ -118,7 +118,7 @@ panel_layout_append_group_helper (GKeyFile                  *keyfile,
                                   const char                *type_for_error_message)
 {
     gboolean    retval = FALSE;
-    const char *id;
+    char       *id;
     char       *unique_id = NULL;
     char       *path = NULL;
     GSettings  *settings = NULL;
@@ -162,6 +162,9 @@ panel_layout_append_group_helper (GKeyFile                  *keyfile,
     existing_ids = panel_dconf_list_subdirs (dconf_path, TRUE);
 
     if (id) {
+        if (set_screen_to > 0) {
+            id = g_strdup_printf ("%s-screen%d", id, set_screen_to);
+        }
         for (i = 0; existing_ids[i]; i++) {
                 if (!strcmp (existing_ids[i], id)) {
                     existing_id = TRUE;
--
cgit 
